name: evpn_multi-homing
prefix: "" 
topology:
  kinds:
    ceos:
      image: ceos:4.34.2F
    # linux:
    #   image: ubuntu
  nodes:
    spine1:
      kind: ceos
      startup-config: "configs/spine1.cfg"
    spine2:
      kind: ceos
      startup-config: "configs/spine2.cfg"
    leaf1:
      kind: ceos
      startup-config: "configs/leaf1.cfg"
    leaf2:
      kind: ceos
      startup-config: "configs/leaf2.cfg"
    leaf3:
      kind: ceos
      startup-config: "configs/leaf3.cfg"
    host1:
      kind: ceos
      startup-config: "configs/host1/startup-config"
      binds:
        - configs/host1/ceos-config:/mnt/flash/ceos-config
    host2:
      kind: ceos
      startup-config: "configs/host2/startup-config"
      binds:
        - configs/host2/ceos-config:/mnt/flash/ceos-config
    host3:
      kind: ceos
      startup-config: "configs/host3/startup-config"
      binds:
        - configs/host3/ceos-config:/mnt/flash/ceos-config
    host4:
      kind: ceos
      startup-config: "configs/host4/startup-config"
      binds:
        - configs/host4/ceos-config:/mnt/flash/ceos-config
    host5:
      kind: ceos
      startup-config: "configs/host5/startup-config"
      binds:
        - configs/host5/ceos-config:/mnt/flash/ceos-config
    host6:
      kind: ceos
      startup-config: "configs/host6/startup-config"
      binds:
        - configs/host6/ceos-config:/mnt/flash/ceos-config
  links:
    - endpoints: ["spine1:eth2", "leaf1:eth1"]
    - endpoints: ["spine1:eth3", "leaf2:eth1"]
    - endpoints: ["spine1:eth4", "leaf3:eth1"]
    - endpoints: ["spine2:eth2", "leaf1:eth2"]
    - endpoints: ["spine2:eth3", "leaf2:eth2"]
    - endpoints: ["spine2:eth4", "leaf3:eth2"]
    
    - endpoints: ["leaf1:eth3", "host1:eth1"]
    - endpoints: ["leaf1:eth4", "host1:eth2"]
    - endpoints: ["leaf1:eth5", "host2:eth1"]
    - endpoints: ["leaf1:eth6", "host2:eth2"]

    - endpoints: ["leaf2:eth3", "host3:eth1"]
    - endpoints: ["leaf2:eth4", "host3:eth2"]
    - endpoints: ["leaf2:eth5", "host4:eth1"]
    - endpoints: ["leaf2:eth6", "host4:eth2"]

    - endpoints: ["leaf3:eth3", "host5:eth1"]
    - endpoints: ["leaf3:eth4", "host6:eth1"]
    

# clab deploy -t evpn_multi-homing.yaml
# clab inspect -t evpn_multi-homing.yaml
# clab graph -t evpn_multi-homing.yaml
# clab destroy -t evpn_multi-homing.yaml : 작성한 토폴로지 제거 → node 설정 파일(startup config) 유지
# clab destroy -ac evpn_multi-homing.yaml : 토폴로지 완전 초기화

# apt-get update
# apt-get install net-tools
# apt install iputils-ping
# apt install vim 
# apt install netplan.io -y

# apt install openssh-server