name: vxlan
prefix: "" 
topology:
  kinds:
    ceos:
      image: ceos:4.34.2F
  nodes:
    spine1:
      kind: ceos
      startup-config: "configs/spine1/spine1.cfg"
      binds:
        - configs/spine1/startup-config:/mnt/flash/startup-config
    spine2:
      kind: ceos
      startup-config: "configs/spine2/spine2.cfg"
      # binds:
      #   - configs/spine2/startup-config:/mnt/flash/startup-config
    leaf1:
      kind: ceos
      startup-config: "configs/leaf1/leaf1.cfg"
      # binds:
      #   - configs/leaf1/startup-config:/mnt/flash/startup-config
    leaf2:
      kind: ceos
      startup-config: "configs/leaf2/leaf2.cfg"
      # binds:
      #   - configs/leaf2/startup-config:/mnt/flash/startup-config
    leaf3:
      kind: ceos
      startup-config: "configs/leaf3/leaf3.cfg"
      # binds:
      #   - configs/leaf3/startup-config:/mnt/flash/startup-config
    host1:
      kind: ceos
      startup-config: "configs/host1/host1.cfg"
      binds:
        - configs/host1/ceos-config:/mnt/flash/ceos-config
        # - configs/host1/startup-config:/mnt/flash/startup-config
    host2:
      kind: ceos
      startup-config: "configs/host2/host2.cfg"
      binds:
        - configs/host2/ceos-config:/mnt/flash/ceos-config
        # - configs/host2/startup-config:/mnt/flash/startup-config
    host3:
      kind: ceos
      startup-config: "configs/host3/host3.cfg"
      binds:
        - configs/host3/ceos-config:/mnt/flash/ceos-config
        # - configs/host3/startup-config:/mnt/flash/startup-config
    host4:
      kind: ceos
      startup-config: "configs/host4/host4.cfg"
      binds:
        - configs/host4/ceos-config:/mnt/flash/ceos-config
        # - configs/host4/startup-config:/mnt/flash/startup-config
    host5:
      kind: ceos
      startup-config: "configs/host5/host5.cfg"
      binds:
        - configs/host5/ceos-config:/mnt/flash/ceos-config
        # - configs/host5/startup-config:/mnt/flash/startup-config
    host6:
      kind: ceos
      startup-config: "configs/host6/host6.cfg"
      binds:
        - configs/host6/ceos-config:/mnt/flash/ceos-config
        # - configs/host6/startup-config:/mnt/flash/startup-config
  links:
    - endpoints: ["spine1:eth2", "leaf1:eth1"]
    - endpoints: ["spine1:eth3", "leaf2:eth1"]
    - endpoints: ["spine1:eth4", "leaf3:eth1"]
    - endpoints: ["spine2:eth2", "leaf1:eth2"]
    - endpoints: ["spine2:eth3", "leaf2:eth2"]
    - endpoints: ["spine2:eth4", "leaf3:eth2"]
    - endpoints: ["leaf1:eth3", "host1:eth1"]
    - endpoints: ["leaf1:eth4", "host2:eth1"]
    - endpoints: ["leaf2:eth3", "host3:eth1"]
    - endpoints: ["leaf2:eth4", "host4:eth1"]
    - endpoints: ["leaf3:eth3", "host5:eth1"]
    - endpoints: ["leaf3:eth4", "host6:eth1"]
    

# clab deploy -t vxlan.yaml
# clab inspect -t vxlan.yaml
# clab graph -t vxlan.yaml
# clab destroy -t vxlan.yaml : 작성한 토폴로지 제거 → node 설정 파일(startup config) 유지
# clab destroy -ac vxlan.yaml : 토폴로지 완전 초기화

# apt-get update
# apt-get install net-tools
# apt install iputils-ping
# apt install vim 
# apt install netplan.io -y

# apt install openssh-server